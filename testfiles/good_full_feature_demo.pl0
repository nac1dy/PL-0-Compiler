const c = 10;

var x, y;

procedure P;
    var i;

    procedure Q;
    var t;
    begin
        t := 0;

        // do-while style loop: prints 7 forever if condition is always false; here it stops at t = 3
        repeat
            t := t + 1;
        until t = 3;

        // read a value into i (local to P) via main/global access from nested procedure
        ? i;

        // use both local and global/main variables
        x := x + i;

        // output local and main values
        ! i;
        ! x
    end;

begin
    // initialize local var and run a counted loop
    i := 0;
    while i < 3 do
    begin
        i := i + 1;
        ! i
    end;

    call Q
end;

begin
    // main assigns const to var
    x := c;

    // simple if
    if x = 10 then ! x;

    // while in main
    y := 0;
    while y < 2 do
    begin
        y := y + 1;
        ! y
    end;

    call P
end.

